## 1. mysql体系结构和存储引擎

数据库和实例的区别

![image-20201119145718721](/Users/lumac/Library/Application Support/typora-user-images/image-20201119145718721.png)

连接池组件

管理服务和工具组件

sql接口组件

查询分析器组件

优化器组件

缓存组件

插件式存储引擎

物理文件

Innodb通过mvcc来获得高并发性,并且实现了sql的标准的四种隔离级别,默认的为RepeatTable级别.同时使用next-key的策略来避免幻读.同时还提供了插入缓冲,二次写,自适应hash索引,预读等高性能和高可用的功能.

对于表中数据的存储,innodb才用了聚集的方式,因此每张表的存储都是按主键的顺序进行存放.如果没有显示的定义表的主键,innodb会为每一行生成一个6字节的rowid,并以此作为主键.

**MyISAM**

不支持事务,表锁设计,支持全文索引,

## 2. innodb存储引擎

#### 后台线程

master thread

io thread

purge thread

page cleaner thread

### innodb关键特性

**插入缓冲**

一般的根据主键的插入,是不需要随机读的.但是对于非聚集索引的插入或者跟新操作,

**两次写**

**自适应hash索引**

**异步io**

**刷新邻接页**

## 3.文件



## 4.表

### 索引组织表



### 逻辑存储结构



## 5.索引和算法



## 6.锁

难点:最大程度利用数据库的并发访问,还要确保每个用户能以一致性的方式读取和修改数据.

## 7.事务



## 8.备份和恢复



## 9.性能调优



## 10.源代码编译和调试